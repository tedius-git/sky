var _=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},Ke=class{static fromArray(t,r){let n=r||new ve;for(let i=t.length-1;i>=0;--i)n=new fe(t[i],n);return n}[Symbol.iterator](){return new Rr(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof ve}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function d(e,t){return new fe(e,t)}function a(e,t){return Ke.fromArray(e,t)}var Rr=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof ve)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},ve=class extends Ke{},fe=class extends Ke{constructor(t,r){super(),this.head=t,this.tail=r}},bt=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return wt(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=wt(this.rawBuffer,this.bitOffset,i),o=wt(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=wt(this.rawBuffer,this.bitOffset,r),s=wt(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(xi("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(xi("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function wt(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var $i={};function xi(e,t){$i[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),$i[e]=!0)}var yt=class e extends _{static isResult(t){return t instanceof e}},C=class extends yt{constructor(t){super(),this[0]=t}isOk(){return!0}},A=class extends yt{constructor(t){super(),this[0]=t}isOk(){return!1}};function U(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!gi(n)||!gi(i)||!go(n,i)||po(n,i)||_o(n,i)||mo(n,i)||ho(n,i)||$o(n,i)||xo(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,l]=fo(n);for(let c of u(n))r.push(l(n,c),l(i,c))}return!0}function fo(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function po(e,t){return e instanceof Date&&(e>t||e<t)}function _o(e,t){return!(e instanceof bt)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function mo(e,t){return Array.isArray(e)&&e.length!==t.length}function ho(e,t){return e instanceof Map&&e.size!==t.size}function $o(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function xo(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function gi(e){return typeof e=="object"&&e!==null}function go(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function it(e,t){return t===0?0:e/t}function pe(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let u in s)o[u]=s[u];return o}var H=class extends _{},D=class extends _{},Q=class extends _{};var Z=class extends _{constructor(t){super(),this[0]=t}},ee=class extends _{};var wi=new WeakMap,Hr=new DataView(new ArrayBuffer(8)),Wr=0;function Vr(e){let t=wi.get(e);if(t!==void 0)return t;let r=Wr++;return Wr===2147483647&&(Wr=0),wi.set(e,r),r}function Yr(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Xr(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function yi(e){Hr.setFloat64(0,e);let t=Hr.getInt32(0),r=Hr.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function wo(e){return Xr(e.toString())}function bo(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Vr(e);if(e instanceof Date)return yi(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+ge(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+ge(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Yr(ge(n),ge(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Yr(ge(o),Xr(s))|0}}return r}function ge(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return yi(e);case"string":return Xr(e);case"bigint":return wo(e);case"object":return bo(e);case"symbol":return Vr(e);case"function":return Vr(e);default:return 0}}var Be=5,Kr=Math.pow(2,Be),yo=Kr-1,ko=Kr/2,vo=Kr/4,ue=0,Ae=1,de=2,Qe=3,Qr={type:de,bitmap:0,array:[]};function vt(e,t){return e>>>t&yo}function nr(e,t){return 1<<vt(e,t)}function jo(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Zr(e,t){return jo(e&t-1)}function we(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Lo(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Jr(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function ki(e,t,r,n,i,s){let o=ge(t);if(o===n)return{type:Qe,hash:o,array:[{type:ue,k:t,v:r},{type:ue,k:i,v:s}]};let u={val:!1};return jt(en(Qr,e,o,t,r,u),e,n,i,s,u)}function jt(e,t,r,n,i,s){switch(e.type){case Ae:return Oo(e,t,r,n,i,s);case de:return en(e,t,r,n,i,s);case Qe:return Eo(e,t,r,n,i,s)}}function Oo(e,t,r,n,i,s){let o=vt(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:Ae,size:e.size+1,array:we(e.array,o,{type:ue,k:n,v:i})};if(u.type===ue)return U(n,u.k)?i===u.v?e:{type:Ae,size:e.size,array:we(e.array,o,{type:ue,k:n,v:i})}:(s.val=!0,{type:Ae,size:e.size,array:we(e.array,o,ki(t+Be,u.k,u.v,r,n,i))});let l=jt(u,t+Be,r,n,i,s);return l===u?e:{type:Ae,size:e.size,array:we(e.array,o,l)}}function en(e,t,r,n,i,s){let o=nr(r,t),u=Zr(e.bitmap,o);if((e.bitmap&o)!==0){let l=e.array[u];if(l.type!==ue){let p=jt(l,t+Be,r,n,i,s);return p===l?e:{type:de,bitmap:e.bitmap,array:we(e.array,u,p)}}let c=l.k;return U(n,c)?i===l.v?e:{type:de,bitmap:e.bitmap,array:we(e.array,u,{type:ue,k:n,v:i})}:(s.val=!0,{type:de,bitmap:e.bitmap,array:we(e.array,u,ki(t+Be,c,l.v,r,n,i))})}else{let l=e.array.length;if(l>=ko){let c=new Array(32),p=vt(r,t);c[p]=en(Qr,t+Be,r,n,i,s);let x=0,h=e.bitmap;for(let $=0;$<32;$++){if((h&1)!==0){let m=e.array[x++];c[$]=m}h=h>>>1}return{type:Ae,size:l+1,array:c}}else{let c=Lo(e.array,u,{type:ue,k:n,v:i});return s.val=!0,{type:de,bitmap:e.bitmap|o,array:c}}}}function Eo(e,t,r,n,i,s){if(r===e.hash){let o=tn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Qe,hash:r,array:we(e.array,o,{type:ue,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:Qe,hash:r,array:we(e.array,u,{type:ue,k:n,v:i})}}return jt({type:de,bitmap:nr(e.hash,t),array:[e]},t,r,n,i,s)}function tn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(U(t,e.array[n].k))return n;return-1}function rr(e,t,r,n){switch(e.type){case Ae:return So(e,t,r,n);case de:return Ao(e,t,r,n);case Qe:return Bo(e,n)}}function So(e,t,r,n){let i=vt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==ue)return rr(s,t+Be,r,n);if(U(n,s.k))return s}}function Ao(e,t,r,n){let i=nr(r,t);if((e.bitmap&i)===0)return;let s=Zr(e.bitmap,i),o=e.array[s];if(o.type!==ue)return rr(o,t+Be,r,n);if(U(n,o.k))return o}function Bo(e,t){let r=tn(e,t);if(!(r<0))return e.array[r]}function rn(e,t,r,n){switch(e.type){case Ae:return zo(e,t,r,n);case de:return To(e,t,r,n);case Qe:return Co(e,n)}}function zo(e,t,r,n){let i=vt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===ue){if(!U(s.k,n))return e}else if(o=rn(s,t+Be,r,n),o===s)return e;if(o===void 0){if(e.size<=vo){let u=e.array,l=new Array(e.size-1),c=0,p=0,x=0;for(;c<i;){let h=u[c];h!==void 0&&(l[p]=h,x|=1<<c,++p),++c}for(++c;c<u.length;){let h=u[c];h!==void 0&&(l[p]=h,x|=1<<c,++p),++c}return{type:de,bitmap:x,array:l}}return{type:Ae,size:e.size-1,array:we(e.array,i,o)}}return{type:Ae,size:e.size,array:we(e.array,i,o)}}function To(e,t,r,n){let i=nr(r,t);if((e.bitmap&i)===0)return e;let s=Zr(e.bitmap,i),o=e.array[s];if(o.type!==ue){let u=rn(o,t+Be,r,n);return u===o?e:u!==void 0?{type:de,bitmap:e.bitmap,array:we(e.array,s,u)}:e.bitmap===i?void 0:{type:de,bitmap:e.bitmap^i,array:Jr(e.array,s)}}return U(n,o.k)?e.bitmap===i?void 0:{type:de,bitmap:e.bitmap^i,array:Jr(e.array,s)}:e}function Co(e,t){let r=tn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Qe,hash:e.hash,array:Jr(e.array,r)}}function vi(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===ue){t(s.v,s.k);continue}vi(s,t)}}}var He=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=rr(this.root,0,ge(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Qr:this.root,s=jt(i,0,ge(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=rn(this.root,0,ge(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:rr(this.root,0,ge(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){vi(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Yr(ge(r),ge(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!U(t.get(n,!r),r))throw bi}),!0}catch(r){if(r===bi)return!1;throw r}}},bi=Symbol();var No=void 0,ji={};function je(e){return e.toString()}function We(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let r=t.indexOf("e");return r>=0?t.slice(0,r)+".0"+t.slice(r):t+".0"}}function nn(e,t){return e.startsWith(t)}var Li=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),zl=new RegExp(`^[${Li}]*`),Tl=new RegExp(`[${Li}]*$`);function ir(e){return Math.floor(e)}function sn(e){return Math.round(e)}function on(e){return Math.trunc(e)}function ze(){let e=Math.random();return e===1?ze():e}function Lt(){return He.new()}function Ot(e,t){let r=e.get(t,ji);return r===ji?new A(No):new C(r)}function Oi(e,t,r){return r.set(e,t)}function qo(e){return e>=0?e:0-e}function Ei(e,t,r){return qo(e-t)<=r}function un(e){return-1*e}function ln(e){return e>=0?sn(e):0-sn(un(e))}function sr(e,t){return e+t}function an(e,t){return e*t}function cn(e){let t=ze()*e,r=ir(t);return ln(r)}function St(e,t,r){return Oi(t,r,e)}function or(e){return e[0]}function Ai(e){return e[1]}var P=class extends _{},Te=class extends _{};function At(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=d(i,n)}}}function F(e){return At(e,a([]))}function Bi(e){if(e.hasLength(0))return new A(void 0);{let t=e.head;return new C(t)}}function Ro(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return F(s);{let o=n.head,u=n.tail,l;i(o)?l=d(o,s):l=s;let p=l;e=u,t=i,r=p}}}function zi(e,t){return Ro(e,t,a([]))}function Go(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return F(s);{let o=n.head;e=n.tail,t=i,r=d(i(o),s)}}}function K(e,t){return Go(e,t,a([]))}function Ho(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return F(u);if(s.hasLength(0))return F(u);{let l=i.head,c=i.tail,p=s.head,x=s.tail;e=c,t=x,r=o,n=d(o(l,p),u)}}}function lr(e,t,r){return Ho(e,t,r,a([]))}function Wo(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=d(i,n)}}}function me(e,t){return Wo(F(e),t)}function te(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Ti(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!0;{let i=r.head,s=r.tail;if(n(i))e=s,t=n;else return!1}}}function Vo(e,t,r,n,i,s){for(;;){let o=e,u=t,l=r,c=n,p=i,x=s,h=d(p,l);if(o.hasLength(0))return c instanceof P?d(F(h),x):d(h,x);{let $=o.head,m=o.tail,v=u(p,$);if(v instanceof Q&&c instanceof Te)e=m,t=u,r=h,n=c,i=$,s=x;else if(v instanceof H&&c instanceof P)e=m,t=u,r=h,n=c,i=$,s=x;else if(v instanceof D&&c instanceof P)e=m,t=u,r=h,n=c,i=$,s=x;else if(v instanceof Q&&c instanceof P){let f;c instanceof P?f=d(F(h),x):f=d(h,x);let k=f;if(m.hasLength(0))return d(a([$]),k);{let w=m.head,E=m.tail,b,g=u($,w);g instanceof H?b=new P:g instanceof D?b=new P:b=new Te;let j=b;e=E,t=u,r=a([$]),n=j,i=w,s=k}}else if(v instanceof H&&c instanceof Te){let f;c instanceof P?f=d(F(h),x):f=d(h,x);let k=f;if(m.hasLength(0))return d(a([$]),k);{let w=m.head,E=m.tail,b,g=u($,w);g instanceof H?b=new P:g instanceof D?b=new P:b=new Te;let j=b;e=E,t=u,r=a([$]),n=j,i=w,s=k}}else{let f;c instanceof P?f=d(F(h),x):f=d(h,x);let k=f;if(m.hasLength(0))return d(a([$]),k);{let w=m.head,E=m.tail,b,g=u($,w);g instanceof H?b=new P:g instanceof D?b=new P:b=new Te;let j=b;e=E,t=u,r=a([$]),n=j,i=w,s=k}}}}}function Yo(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return At(s,u);if(s.hasLength(0))return At(i,u);{let l=i.head,c=i.tail,p=s.head,x=s.tail,h=o(l,p);h instanceof H?(e=c,t=s,r=o,n=d(l,u)):h instanceof Q?(e=i,t=x,r=o,n=d(p,u)):(e=i,t=x,r=o,n=d(p,u))}}}function Jo(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return F(s);if(n.hasLength(1)){let o=n.head;return F(d(F(o),s))}else{let o=n.head,u=n.tail.head,l=n.tail.tail,c=Yo(o,u,i,a([]));e=l,t=i,r=d(c,s)}}}function Xo(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return At(s,u);if(s.hasLength(0))return At(i,u);{let l=i.head,c=i.tail,p=s.head,x=s.tail,h=o(l,p);h instanceof H?(e=i,t=x,r=o,n=d(p,u)):h instanceof Q?(e=c,t=s,r=o,n=d(l,u)):(e=c,t=s,r=o,n=d(l,u))}}}function Ko(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return F(s);if(n.hasLength(1)){let o=n.head;return F(d(F(o),s))}else{let o=n.head,u=n.tail.head,l=n.tail.tail,c=Xo(o,u,i,a([]));e=l,t=i,r=d(c,s)}}}function Qo(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return a([]);if(n.hasLength(1)&&i instanceof P)return n.head;if(n.hasLength(1)&&i instanceof Te){let o=n.head;return F(o)}else i instanceof P?(e=Jo(n,s,a([])),t=new Te,r=s):(e=Ko(n,s,a([])),t=new P,r=s)}}function Ci(e,t){if(e.hasLength(0))return a([]);if(e.hasLength(1)){let r=e.head;return a([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof H?s=new P:o instanceof D?s=new P:s=new Te;let u=s,l=Vo(i,t,a([r]),u,n,a([]));return Qo(l,new P,t)}}function Zo(e,t){if(e.hasLength(0))return new A(void 0);{let r=e.head,n=e.tail;return new C(te(n,r,t))}}function Mi(e){return Zo(e,(t,r)=>r)}function uu(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)){let i=r.head;e=r.tail,t=n+i}else return n}}function Ni(e){return uu(e,"")}function Ii(e){return!!e.isOk()}function du(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return[i,s];if(n.atLeastLength(1)&&n.head.isOk()){let o=n.head[0];e=n.tail,t=d(o,i),r=s}else{let o=n.head[0];e=n.tail,t=i,r=d(o,s)}}}function qi(e){return du(e,a([]),a([]))}var ar=class extends _{constructor(t){super(),this.function=t}};function ut(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new C(n):new A(i)}function pn(e){return new ar(t=>[e,a([])])}function dn(e,t){return new ar(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Tt(e){return!e}function cr(e,t,r){return e?t:r()}function ae(e){return e}var dr=class extends _{constructor(t){super(),this.dict=t}};function Ri(){return new dr(Lt())}function mn(e,t){let r=e.dict,n=Ot(r,t);return Ii(n)}var gu=void 0;function Gi(e,t){return new dr(St(e.dict,t,gu))}var bu=He.new();function _r(){return bu}var yu=Ri();function Mt(){return yu}var Le=globalThis?.document,mr="http://www.w3.org/1999/xhtml",hr=1,$r=3,Nt=11,Hi=!!globalThis.HTMLElement?.prototype?.moveBefore;var O=a([]),xr=new ee;var ku=new Q,vu=new H,ju=new D;function gr(e,t){return e.name===t.name?ju:e.name<t.name?vu:ku}var be=class extends _{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},It=class extends _{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},re=class extends _{constructor(t,r,n,i,s,o,u,l){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=u,this.limit=l}},lt=class extends _{constructor(t){super(),this.kind=t}},qt=class extends _{constructor(t,r){super(),this.kind=t,this.delay=r}},Ut=class extends _{constructor(t,r){super(),this.kind=t,this.delay=r}};function Zi(e,t){if(e instanceof lt&&t instanceof lt)return!0;if(e instanceof qt&&t instanceof qt&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else if(e instanceof Ut&&t instanceof Ut&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else return!1}function Su(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(2)&&r.head instanceof be&&r.head.name==="class"&&r.tail.head instanceof be&&r.tail.head.name==="class"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,u=r.tail.tail,l=s+" "+o,c=new be(i,"class",l);e=d(c,u),t=n}else if(r.atLeastLength(2)&&r.head instanceof be&&r.head.name==="style"&&r.tail.head instanceof be&&r.tail.head.name==="style"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,u=r.tail.tail,l=s+";"+o,c=new be(i,"style",l);e=d(c,u),t=n}else{let i=r.head;e=r.tail,t=d(i,n)}}}function es(e){if(e.hasLength(0))return e;if(e.hasLength(1))return e;{let r=Ci(e,(n,i)=>gr(i,n));return Su(r,O)}}var gn=0;function ts(e,t){return new be(gn,e,t)}var rs=1;var wn=2;function ns(e,t,r,n,i,s,o){return new re(wn,e,t,r,n,i,s,o)}var bn=1;var yn=2;function y(e,t){return ts(e,t)}function T(e){return y("class",e)}function wr(e){return y("id",e)}function Pt(e){return y("src",e)}var br=class extends _{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};var is=new br(a([]),a([]),a([]));function Oe(){return is}function yr(e){let t=n=>{let i=n.dispatch;return e(i)},r=is;return new br(a([t]),r.before_paint,r.after_paint)}function he(){return null}function at(e,t){let r=e?.get(t);return r!=null?new C(r):new A(void 0)}function Rt(e,t,r){return e??=new Map,e.set(t,r),e}function kn(e,t){return e?.delete(t),e}var vr=class extends _{},jr=class extends _{constructor(t,r){super(),this.key=t,this.parent=r}},vn=class extends _{constructor(t,r){super(),this.index=t,this.parent=r}};function Tu(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(nn(r,i))return!0;e=r,t=s}}}function Ve(e,t,r){return r===""?new vn(t,e):new jr(r,e)}var jn=new vr,Ln=`
`,On="	";function ss(e,t){for(;;){let r=e,n=t;if(r instanceof vr){if(n.hasLength(0))return"";{let i=n.tail;return Ni(i)}}else if(r instanceof jr){let i=r.key;e=r.parent,t=d(On,d(i,n))}else{let i=r.index;e=r.parent,t=d(Ln,d(je(i),n))}}}function Cu(e){return ss(e,a([]))}function os(e,t){return t.hasLength(0)?!1:Tu(Cu(e),t)}var En="\f";function Sn(e,t){return ss(e,a([En,t]))}var le=class extends _{constructor(t,r,n,i,s,o){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s,this.children_count=o}},ye=class extends _{constructor(t,r,n,i,s,o,u,l,c,p){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=u,this.keyed_children=l,this.self_closing=c,this.void=p}},Me=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},Ee=class extends _{constructor(t,r,n,i,s,o,u){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=u}};function Iu(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function $e(e){return e instanceof le?1+e.children_count:1}var An=0;function ls(e,t,r,n,i){return new le(An,e,t,r,n,i)}var Bn=1;function zn(e,t,r,n,i,s,o,u,l){return new ye(Bn,e,t,r,n,es(i),s,o,u,l||Iu(n,r))}var Tn=2;function Cn(e,t,r){return new Me(Tn,e,t,r)}var as=3;function cs(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,c=i;if(o.hasLength(0))return[F(l),c];if(o.atLeastLength(1)&&o.head instanceof le&&o.head.key===""){let p=o.head,x=o.tail,h=s+"::"+je(u),$=cs(h,p.children,0,O,he()),m=$[0],v=$[1],f,k=p;f=new le(k.kind,k.key,k.mapper,m,v,k.children_count);let E=d(f,l),b=u+1;e=s,t=x,r=b,n=E,i=c}else if(o.atLeastLength(1)&&o.head.key!==""){let p=o.head,x=o.tail,h=s+"::"+p.key,$=Mn(h,p),m=d($,l),v=Rt(c,h,$),f=u+1;e=s,t=x,r=f,n=m,i=v}else{let p=o.head,x=o.tail,h=d(p,l),$=u+1;e=s,t=x,r=$,n=h,i=c}}}function Mn(e,t){if(t instanceof ye){let r=t;return new ye(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof Me){let r=t;return new Me(r.kind,e,r.mapper,r.content)}else if(t instanceof Ee){let r=t;return new Ee(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}else{let r=t.children,n=cs(e,r,0,O,he()),i=n[0],s=n[1],o=t;return new le(o.kind,e,o.mapper,i,s,o.children_count)}}var et=class extends _{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},Nn=class extends _{constructor(t,r){super(),this.kind=t,this.content=r}},In=class extends _{constructor(t,r){super(),this.kind=t,this.inner_html=r}},qn=class extends _{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},Un=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.before=n,this.count=i}},Dn=class extends _{constructor(t,r,n){super(),this.kind=t,this.key=r,this.count=n}},Pn=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.from=r,this.count=n,this.with=i}},Fn=class extends _{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}},Rn=class extends _{constructor(t,r,n){super(),this.kind=t,this.from=r,this.count=n}};function Gn(e,t,r,n){return new et(e,t,r,n)}var Hn=0;function fs(e){return new Nn(Hn,e)}var Wn=1;function ps(e){return new In(Wn,e)}var Vn=2;function Yn(e,t){return new qn(Vn,e,t)}var Lr=3;function ds(e,t,r){return new Un(Lr,e,t,r)}var Jn=4;function _s(e,t){return new Dn(Jn,e,t)}var Or=5;function Xn(e,t,r){return new Pn(Or,e,t,r)}var Er=6;function Kn(e,t){return new Fn(Er,e,t)}var Sr=7;function ms(e,t){return new Rn(Sr,e,t)}var Tr=class extends _{constructor(t,r){super(),this.patch=t,this.events=r}},Qn=class extends _{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function Uu(e,t,r,n){return r==="input"&&t===""?Br(e,n):r==="select"&&t===""?Br(e,n):r==="textarea"&&t===""?Br(e,n):!1}function $s(e,t,r,n,i,s,o,u){for(;;){let l=e,c=t,p=r,x=n,h=i,$=s,m=o,v=u;if(h.hasLength(0)&&$.hasLength(0))return new Qn(m,v,x);if(h.atLeastLength(1)&&h.head instanceof re&&$.hasLength(0)){let f=h.head,k=h.head.name,w=h.tail,E=d(f,v),b=Ar(x,c,k);e=l,t=c,r=p,n=b,i=w,s=$,o=m,u=E}else if(h.atLeastLength(1)&&$.hasLength(0)){let f=h.head,k=h.tail,w=d(f,v);e=l,t=c,r=p,n=x,i=k,s=$,o=m,u=w}else if(h.hasLength(0)&&$.atLeastLength(1)&&$.head instanceof re){let f=$.head,k=$.head.name,w=$.head.handler,E=$.tail,b=d(f,m),g=Ht(x,p,c,k,w);e=l,t=c,r=p,n=g,i=h,s=E,o=b,u=v}else if(h.hasLength(0)&&$.atLeastLength(1)){let f=$.head,k=$.tail,w=d(f,m);e=l,t=c,r=p,n=x,i=h,s=k,o=w,u=v}else{let f=h.head,k=h.tail,w=$.head,E=$.tail,b=gr(f,w);if(f instanceof be&&b instanceof D&&w instanceof be){let g,j=w.name;j==="value"||j==="checked"||j==="selected"?g=l||f.value!==w.value:g=f.value!==w.value;let S=g,B;S?B=d(w,m):B=m;let M=B;e=l,t=c,r=p,n=x,i=k,s=E,o=M,u=v}else if(f instanceof It&&b instanceof D&&w instanceof It){let g,j=w.name;j==="scrollLeft"||j==="scrollRight"?g=!0:j==="value"?g=l||!U(f.value,w.value):j==="checked"?g=l||!U(f.value,w.value):j==="selected"?g=l||!U(f.value,w.value):g=!U(f.value,w.value);let S=g,B;S?B=d(w,m):B=m;let M=B;e=l,t=c,r=p,n=x,i=k,s=E,o=M,u=v}else if(f instanceof re&&b instanceof D&&w instanceof re){let g=w.name,j=w.handler,S=f.prevent_default!==w.prevent_default||f.stop_propagation!==w.stop_propagation||f.immediate!==w.immediate||!Zi(f.limit,w.limit),B;S?B=d(w,m):B=m;let M=B,I=Ht(x,p,c,g,j);e=l,t=c,r=p,n=I,i=k,s=E,o=M,u=v}else if(f instanceof re&&b instanceof D){let g=f.name,j=d(w,m),S=d(f,v),B=Ar(x,c,g);e=l,t=c,r=p,n=B,i=k,s=E,o=j,u=S}else if(b instanceof D&&w instanceof re){let g=w.name,j=w.handler,S=d(w,m),B=d(f,v),M=Ht(x,p,c,g,j);e=l,t=c,r=p,n=M,i=k,s=E,o=S,u=B}else if(b instanceof D){let g=d(w,m),j=d(f,v);e=l,t=c,r=p,n=x,i=k,s=E,o=g,u=j}else if(b instanceof Q&&w instanceof re){let g=w.name,j=w.handler,S=d(w,m),B=Ht(x,p,c,g,j);e=l,t=c,r=p,n=B,i=h,s=E,o=S,u=v}else if(b instanceof Q){let g=d(w,m);e=l,t=c,r=p,n=x,i=h,s=E,o=g,u=v}else if(f instanceof re&&b instanceof H){let g=f.name,j=d(f,v),S=Ar(x,c,g);e=l,t=c,r=p,n=S,i=k,s=$,o=m,u=j}else{let g=d(f,v);e=l,t=c,r=p,n=x,i=k,s=$,o=m,u=g}}}}function Zn(e,t,r,n,i,s,o,u,l,c,p,x,h,$){for(;;){let m=e,v=t,f=r,k=n,w=i,E=s,b=o,g=u,j=l,S=c,B=p,M=x,I=h,ie=$;if(m.hasLength(0)&&f.hasLength(0))return new Tr(new et(j,b,B,M),ie);if(m.atLeastLength(1)&&f.hasLength(0)){let z=m.head,R=m.tail,L;z.key===""||!mn(w,z.key)?L=b+$e(z):L=b;let G=L,J=Wt(ie,S,g,z);e=R,t=v,r=f,n=k,i=w,s=E,o=G,u=g,l=j,c=S,p=B,x=M,h=I,$=J}else if(m.hasLength(0)&&f.atLeastLength(1)){let z=gs(ie,I,S,g,f),R=Kn(f,g-E),L=d(R,B);return new Tr(new et(j,b,L,M),z)}else if(m.atLeastLength(1)&&f.atLeastLength(1)&&m.head.key!==f.head.key){let z=m.head,R=m.tail,L=f.head,se=f.tail,G=at(v,L.key),J=at(k,z.key),ce=mn(w,z.key);if(J.isOk()&&G.isOk()&&ce)e=R,t=v,r=f,n=k,i=w,s=E-$e(z),o=b,u=g,l=j,c=S,p=B,x=M,h=I,$=ie;else if(J.isOk()&&G.isOk()){let q=G[0],N=$e(L),V=g-E,X=ds(L.key,V,N),oe=d(X,B),ke=Gi(w,L.key),Se=E+N;e=d(q,m),t=v,r=f,n=k,i=ke,s=Se,o=b,u=g,l=j,c=S,p=oe,x=M,h=I,$=ie}else if(!J.isOk()&&G.isOk()){let q=$e(z),N=E-q,V=Wt(ie,S,g,z),X=_s(z.key,q),oe=d(X,B);e=R,t=v,r=f,n=k,i=w,s=N,o=b,u=g,l=j,c=S,p=oe,x=M,h=I,$=V}else if(J.isOk()&&!G.isOk()){let q=g-E,N=$e(L),V=zr(ie,I,S,g,L),X=Kn(a([L]),q),oe=d(X,B);e=m,t=v,r=se,n=k,i=w,s=E+N,o=b,u=g+N,l=j,c=S,p=oe,x=M,h=I,$=V}else{let q=$e(z),N=$e(L),V=Xn(g-E,q,L),X,ke=Wt(ie,S,g,z);X=zr(ke,I,S,g,L);let Se=X;e=R,t=v,r=se,n=k,i=w,s=E-q+N,o=b,u=g+N,l=j,c=S,p=d(V,B),x=M,h=I,$=Se}}else if(m.atLeastLength(1)&&m.head instanceof le&&f.atLeastLength(1)&&f.head instanceof le){let z=m.head,R=m.tail,L=f.head,se=f.tail,G=g+1,J=z.children_count,ce=L.children_count,q=Ye(I,L.mapper),N=Zn(z.children,z.keyed_children,L.children,L.keyed_children,Mt(),E,0,G,-1,S,O,M,q,ie),V;if(N.patch.removed>0){let ke=G+ce-E,Se=ms(ke,N.patch.removed);V=me(N.patch.changes,d(Se,B))}else V=me(N.patch.changes,B);let oe=V;e=R,t=v,r=se,n=k,i=w,s=E+ce-J,o=b,u=G+ce,l=j,c=S,p=oe,x=N.patch.children,h=I,$=N.events}else if(m.atLeastLength(1)&&m.head instanceof ye&&f.atLeastLength(1)&&f.head instanceof ye&&m.head.namespace===f.head.namespace&&m.head.tag===f.head.tag){let z=m.head,R=m.tail,L=f.head,se=f.tail,G=Ye(I,L.mapper),J=Ve(S,g,L.key),ce=Uu(ie,L.namespace,L.tag,J),q=$s(ce,J,G,ie,z.attributes,L.attributes,O,O),N=q.added,V=q.removed,X=q.events,oe;N.hasLength(0)&&V.hasLength(0)?oe=O:oe=a([Yn(N,V)]);let ke=oe,Se=Zn(z.children,z.keyed_children,L.children,L.keyed_children,Mt(),0,0,0,g,J,ke,O,G,X),nt,Ge=Se.patch;Ge instanceof et&&Ge.removed===0&&Ge.changes.hasLength(0)&&Ge.children.hasLength(0)?nt=M:nt=d(Se.patch,M);let Fr=nt;e=R,t=v,r=se,n=k,i=w,s=E,o=b,u=g+1,l=j,c=S,p=B,x=Fr,h=I,$=Se.events}else if(m.atLeastLength(1)&&m.head instanceof Me&&f.atLeastLength(1)&&f.head instanceof Me&&m.head.content===f.head.content){let z=m.head,R=m.tail,L=f.head,se=f.tail;e=R,t=v,r=se,n=k,i=w,s=E,o=b,u=g+1,l=j,c=S,p=B,x=M,h=I,$=ie}else if(m.atLeastLength(1)&&m.head instanceof Me&&f.atLeastLength(1)&&f.head instanceof Me){let z=m.tail,R=f.head,L=f.tail,se=Gn(g,0,a([fs(R.content)]),O);e=z,t=v,r=L,n=k,i=w,s=E,o=b,u=g+1,l=j,c=S,p=B,x=d(se,M),h=I,$=ie}else if(m.atLeastLength(1)&&m.head instanceof Ee&&f.atLeastLength(1)&&f.head instanceof Ee){let z=m.head,R=m.tail,L=f.head,se=f.tail,G=Ye(I,L.mapper),J=Ve(S,g,L.key),ce=$s(!1,J,G,ie,z.attributes,L.attributes,O,O),q=ce.added,N=ce.removed,V=ce.events,X;q.hasLength(0)&&N.hasLength(0)?X=O:X=a([Yn(q,N)]);let oe=X,ke;z.inner_html===L.inner_html?ke=oe:ke=d(ps(L.inner_html),oe);let nt=ke,Ge;nt.hasLength(0)?Ge=M:Ge=d(Gn(g,0,nt,a([])),M);let Fr=Ge;e=R,t=v,r=se,n=k,i=w,s=E,o=b,u=g+1,l=j,c=S,p=B,x=Fr,h=I,$=V}else{let z=m.head,R=m.tail,L=f.head,se=f.tail,G=$e(z),J=$e(L),ce=Xn(g-E,G,L),q,V=Wt(ie,S,g,z);q=zr(V,I,S,g,L);let X=q;e=R,t=v,r=se,n=k,i=w,s=E-G+J,o=b,u=g+J,l=j,c=S,p=d(ce,B),x=M,h=I,$=X}}}function ei(e,t,r){return Zn(a([t]),he(),a([r]),he(),Mt(),0,0,0,0,jn,O,O,ae,xs(e))}var Mr=class{offset=0;#e=null;#s=()=>{};#l=!1;constructor(t,r,{useServerEvents:n=!1}={}){this.#e=t,this.#s=r,this.#l=n}mount(t){Cr(this.#e,this.#u(t))}#r=[];push(t){let r=this.offset;r&&(Pe(t.changes,n=>{switch(n.kind){case Er:case Lr:n.before=(n.before|0)+r;break;case Sr:case Or:n.from=(n.from|0)+r;break}}),Pe(t.children,n=>{n.index=(n.index|0)+r})),this.#r.push({node:this.#e,patch:t}),this.#o()}#o(){let t=this;for(;t.#r.length;){let{node:r,patch:n}=t.#r.pop();Pe(n.changes,i=>{switch(i.kind){case Er:t.#a(r,i.children,i.before);break;case Lr:t.#p(r,i.key,i.before,i.count);break;case Jn:t.#d(r,i.key,i.count);break;case Sr:t.#t(r,i.from,i.count);break;case Or:t.#c(r,i.from,i.count,i.with);break;case Hn:t.#i(r,i.content);break;case Wn:t.#_(r,i.inner_html);break;case Vn:t.#f(r,i.added,i.removed);break}}),n.removed&&t.#t(r,r.childNodes.length-n.removed,n.removed),Pe(n.children,i=>{t.#r.push({node:Yt(r,i.index),patch:i})})}}#a(t,r,n){let i=ys();Pe(r,s=>{let o=this.#u(s);ri(t,o),Cr(i,o)}),ti(t,i,Yt(t,n))}#p(t,r,n,i){let s=ks(t,r),o=Yt(t,n);for(let u=0;u<i&&s!==null;++u){let l=s.nextSibling;Hi?t.moveBefore(s,o):ti(t,s,o),s=l}}#d(t,r,n){this.#n(t,ks(t,r),n)}#t(t,r,n){this.#n(t,Yt(t,r),n)}#n(t,r,n){for(;n-- >0&&r!==null;){let i=r.nextSibling,s=r[Y].key;s&&t[Y].keyedChildren.delete(s);for(let[o,{timeout:u}]of r[Y].debouncers)clearTimeout(u);t.removeChild(r),r=i}}#c(t,r,n,i){this.#t(t,r,n);let s=this.#u(i);ri(t,s),ti(t,s,Yt(t,r))}#i(t,r){t.data=r??""}#_(t,r){t.innerHTML=r??""}#f(t,r,n){Pe(n,i=>{let s=i.name;t[Y].handlers.has(s)?(t.removeEventListener(s,vs),t[Y].handlers.delete(s),t[Y].throttles.has(s)&&t[Y].throttles.delete(s),t[Y].debouncers.has(s)&&(clearTimeout(t[Y].debouncers.get(s).timeout),t[Y].debouncers.delete(s))):(t.removeAttribute(s),Ls[s]?.removed?.(t,s))}),Pe(r,i=>{this.#h(t,i)})}#u(t){switch(t.kind){case Bn:{let r=ws(t);return this.#m(r,t),this.#a(r,t.children,0),r}case Tn:{let r=bs(t.content);return Fe(r,t.key),r}case An:{let r=ys(),n=bs();return Fe(n,t.key),Cr(r,n),Pe(t.children,i=>{Cr(r,this.#u(i))}),r}case as:{let r=ws(t);return this.#m(r,t),this.#_(r,t.inner_html),r}}}#m(t,{attributes:r}){Pe(r,n=>this.#h(t,n))}#h(t,r){let n=t[Y];switch(r.kind){case gn:{let i=r.name,s=r.value??"";s!==t.getAttribute(i)&&t.setAttribute(i,s),Ls[i]?.added?.(t,s);break}case rs:t[r.name]=r.value;break;case wn:{n.handlers.has(r.name)||t.addEventListener(r.name,vs,{passive:!r.prevent_default});let i=r.prevent_default,s=r.stop_propagation,o=r.immediate,u=Array.isArray(r.include)?r.include:[];if(r.limit?.kind===yn){let l=n.throttles.get(r.name)??{last:0,delay:r.limit.delay};n.throttles.set(r.name,l)}if(r.limit?.kind===bn){let l=n.debouncers.get(r.name)??{timeout:null,delay:r.limit.delay};n.debouncers.set(r.name,l)}n.handlers.set(r.name,l=>{i&&l.preventDefault(),s&&l.stopPropagation();let c=l.type,p="",x=l.currentTarget;for(;x!==this.#e;){let $=x[Y].key,m=x.parentNode;if($)p=`${On}${$}${p}`;else{let v=m.childNodes,f=[].indexOf.call(v,x);m===this.#e&&(f-=this.offset),p=`${Ln}${f}${p}`}x=m}p=p.slice(1);let h=this.#l?Du(l,u):l;if(n.throttles.has(c)){let $=n.throttles.get(c),m=Date.now(),v=$.last||0;m>v+$.delay?($.last=m,this.#s(h,p,c,o)):l.preventDefault()}else if(n.debouncers.has(c)){let $=n.debouncers.get(c);clearTimeout($.timeout),$.timeout=setTimeout(()=>{this.#s(h,p,c,o)},$.delay)}else this.#s(h,p,c,o)});break}}}},Pe=(e,t)=>{if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.tail;e=e.tail)t(e.head)},Cr=(e,t)=>e.appendChild(t),ti=(e,t,r)=>e.insertBefore(t,r??null),ws=({key:e,tag:t,namespace:r})=>{let n=Le.createElementNS(r||mr,t);return Fe(n,e),n},bs=e=>Le.createTextNode(e??""),ys=()=>Le.createDocumentFragment(),Yt=(e,t)=>e.childNodes[t|0],Y=Symbol("lustre"),Fe=(e,t="")=>{switch(e.nodeType){case hr:case Nt:e[Y]={key:t,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case $r:e[Y]={key:t,debouncers:new Map};break}},ri=(e,t)=>{if(t.nodeType===Nt){for(t=t.firstChild;t;t=t.nextSibling)ri(e,t);return}let r=t[Y].key;r&&e[Y].keyedChildren.set(r,new WeakRef(t))},ks=(e,t)=>e[Y].keyedChildren.get(t).deref(),vs=e=>{let r=e.currentTarget[Y].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),r(e)},Du=(e,t=[])=>{let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,u=r;s<i.length;s++){if(s===i.length-1){u[i[s]]=o[i[s]];break}u=u[i[s]]??={},o=o[i[s]]}}return r},js=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),Pu=e=>({added(t,r){t[e]=r}}),Ls={checked:js("checked"),selected:js("selected"),value:Pu("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};var Ss=e=>{let t=As(e);if(t===null||t.children instanceof ve){let r=Os();return Fe(r),e.appendChild(r),Bs()}else{if(t.children instanceof fe&&t.children.tail instanceof ve)return t.children.head;{let r=Os();return Fe(r),e.insertBefore(r,e.firstChild),ni(t.children)}}},Os=()=>Le.createTextNode(""),As=e=>{switch(e.nodeType){case hr:{let t=e.getAttribute("data-lustre-key");Fe(e,t),t&&e.removeAttribute("data-lustre-key");let r=e.localName,n=e.namespaceURI,i=!n||n===mr;i&&Fu.includes(r)&&Ru(r,e);let s=Gu(e),o=Es(e),u=i?Je(r,s,o):Ne(n,r,s,o);return t?Mn(t,u):u}case $r:return Fe(e),Xe(e.data);case Nt:return Fe(e),e.childNodes.length>0?ni(Es(e)):null;default:return null}},Fu=["input","select","textarea"],Ru=(e,t)=>{let r=t.value,n=t.checked;e==="input"&&t.type==="checkbox"&&!n||e==="input"&&t.type==="radio"&&!n||t.type!=="checkbox"&&t.type!=="radio"&&!r||queueMicrotask(()=>{t.value=r,t.checked=n,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),Le.activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},Es=e=>{let t=O,r=e.lastChild;for(;r;){let n=As(r),i=r.previousSibling;n?t=new fe(n,t):e.removeChild(r),r=i}return t},Gu=e=>{let t=e.attributes.length,r=O;for(;t-- >0;)r=new fe(Hu(e.attributes[t]),r);return r},Hu=e=>{let t=e.localName,r=e.value;return y(t,r)};var Xt=()=>!!Le;var ii=(e,t)=>e===t;var Jt=class{constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#l=s,this.#a=new Mr(this.root,(o,u,l)=>{let[c,p]=Nr(this.#o,u,l,o);this.#o=c,p.isOk()&&this.dispatch(p[0],!1)}),this.#r=Ss(this.root),this.#o=si(),this.#i=!0,this.#f(n)}root=null;set offset(t){this.#a.offset=t}dispatch(t,r=!1){if(this.#i||=r,this.#p)this.#d.push(t);else{let[n,i]=this.#l(this.#e,t);this.#e=n,this.#f(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}#e;#s;#l;#r;#o;#a;#p=!1;#d=[];#t=O;#n=O;#c=null;#i=!1;#_={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},root:()=>this.root};#f(t){for(this.#p=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#_);if(this.#t=Ts(this.#t,t.before_paint),this.#n=Ts(this.#n,t.after_paint),!this.#d.length)break;[this.#e,t]=this.#l(this.#e,this.#d.shift())}this.#p=!1,this.#i?(cancelAnimationFrame(this.#c),this.#u()):this.#c||(this.#c=requestAnimationFrame(()=>{this.#u()}))}#u(){this.#i=!1,this.#c=null;let t=this.#s(this.#e),{patch:r,events:n}=ei(this.#o,this.#r,t);if(this.#o=n,this.#r=t,this.#a.push(r),this.#t instanceof fe){let i=zs(this.#t);this.#t=O,queueMicrotask(()=>{this.#i=!0,this.#f(i)})}if(this.#n instanceof fe){let i=zs(this.#n);this.#n=O,requestAnimationFrame(()=>{this.#i=!0,this.#f(i)})}}};function zs(e){return{synchronous:e,after_paint:O,before_paint:O}}function Ts(e,t){return e instanceof ve?t:t instanceof ve?e:me(e,t)}var Ie=class extends _{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function si(){return new Ie(he(),O,O)}function xs(e){return new Ie(e.handlers,e.next_dispatched_paths,O)}function Is(e,t,r){return kn(e,Sn(t,r))}function Ar(e,t,r){let n=Is(e.handlers,t,r),i=e;return new Ie(n,i.dispatched_paths,i.next_dispatched_paths)}function Cs(e,t,r){return te(r,e,(n,i)=>{if(i instanceof re){let s=i.name;return Is(n,t,s)}else return n})}function Nr(e,t,r,n){let i=d(t,e.next_dispatched_paths),s,o=e;s=new Ie(o.handlers,o.dispatched_paths,i);let u=s,l=at(u.handlers,t+En+r);if(l.isOk()){let c=l[0];return[u,ut(n,c)]}else return[u,new A(a([]))]}function Br(e,t){return os(t,e.dispatched_paths)}function qs(e,t,r,n,i){return Rt(e,Sn(r,n),dn(i,t))}function Ht(e,t,r,n,i){let s=qs(e.handlers,t,r,n,i),o=e;return new Ie(s,o.dispatched_paths,o.next_dispatched_paths)}function Ms(e,t,r,n){return te(n,e,(i,s)=>{if(s instanceof re){let o=s.name,u=s.handler;return qs(i,t,r,o,u)}else return i})}function Ye(e,t){let r=ii(e,ae),n=ii(t,ae);return n?e:r&&!n?t:i=>e(t(i))}function Ns(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(u.hasLength(0))return i;{let l=u.head,c=u.tail;e=Us(i,s,o,l),t=s,r=o+$e(l),n=c}}}function Us(e,t,r,n){if(n instanceof ye){let i=n.attributes,s=n.children,o=Ve(t,r,n.key),l=Cs(e,o,i);return Ns(l,o,0,s)}else if(n instanceof le){let i=n.children;return Ns(e,t,r+1,i)}else if(n instanceof Ee){let i=n.attributes,s=Ve(t,r,n.key);return Cs(e,s,i)}else return e}function Wt(e,t,r,n){let i=Us(e.handlers,t,r,n),s=e;return new Ie(i,s.dispatched_paths,s.next_dispatched_paths)}function oi(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,c=i;if(c.hasLength(0))return s;{let p=c.head,x=c.tail;e=Ds(s,o,u,l,p),t=o,r=u,n=l+$e(p),i=x}}}function Ds(e,t,r,n,i){if(i instanceof ye){let s=i.attributes,o=i.children,u=Ve(r,n,i.key),l=Ye(t,i.mapper),p=Ms(e,l,u,s);return oi(p,l,u,0,o)}else if(i instanceof le){let s=i.children,o=Ye(t,i.mapper),u=n+1;return oi(e,o,r,u,s)}else if(i instanceof Ee){let s=i.attributes,o=Ve(r,n,i.key),u=Ye(t,i.mapper);return Ms(e,u,o,s)}else return e}function zr(e,t,r,n,i){let s=Ds(e.handlers,t,r,n,i),o=e;return new Ie(s,o.dispatched_paths,o.next_dispatched_paths)}function gs(e,t,r,n,i){let s=oi(e.handlers,t,r,n,i),o=e;return new Ie(s,o.dispatched_paths,o.next_dispatched_paths)}function Je(e,t,r){return zn("",ae,"",e,t,r,he(),!1,!1)}function Ne(e,t,r,n){return zn("",ae,e,t,r,n,he(),!1,!1)}function Xe(e){return Cn("",ae,e)}function Bs(){return Cn("",ae,"")}function Wu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head instanceof le){let i=r.head.children_count;e=r.tail,t=n+i}else e=r.tail,t=n+1}}function ni(e){return ls("",ae,e,he(),Wu(e,0))}function Ir(e){return Xe(e)}function xe(e,t){return Je("div",e,t)}function Fs(e,t){return Je("p",e,t)}function Kt(e){return Je("img",e,O)}function Rs(e,t){return Ne("http://www.w3.org/2000/svg","svg",e,t)}function ui(e,t){return Je("button",e,t)}var tt=class extends _{constructor(t){super(),this.message=t}},ct=class extends _{constructor(t,r){super(),this.name=t,this.data=r}};var rt=class extends _{};var li=class extends _{constructor(t,r,n,i,s,o,u,l){super(),this.open_shadow_root=t,this.adopt_styles=r,this.attributes=n,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=u,this.on_form_restore=l}};function Ws(e){let t=new li(!1,!0,_r(),_r(),!1,xr,xr,xr);return te(e,t,(r,n)=>n.apply(r))}var ai=class e{static start({init:t,update:r,view:n},i,s){if(!Xt())return new A(new ft);let o=i instanceof HTMLElement?i:Le.querySelector(i);return o?new C(new e(o,t(s),r,n)):new A(new qr(i))}#e;constructor(t,[r,n],i,s){this.#e=new Jt(t,[r,n],s,i)}send(t){switch(t.constructor){case tt:{this.dispatch(t.message,!1);break}case ct:{this.emit(t.name,t.data);break}case rt:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},Vs=ai.start;var ci=class extends _{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var qr=class extends _{constructor(t){super(),this.selector=t}},ft=class extends _{};function Ys(e,t,r){return new ci(e,t,r,Ws(O))}function Js(e,t,r){return cr(!Xt(),new A(new ft),()=>Vs(e,t,r))}function Xs(e,t){return setInterval(t,e)}function Ks(e){clearInterval(e)}function Qs(){return window.innerWidth}function Zs(){return window.innerHeight}function pt(e){return Bi(e)}function dt(e){return Mi(e)}function tl(e){return K(e,r=>r===0?0:un(r))}function Re(e,t){return lr(e,t,sr)}function eo(e,t){return Re(e,tl(t))}function qe(e,t){let r=(n,i)=>n===0||i===0?0:an(n,i);return K(t,n=>r(e,n))}function to(e,t){return te(lr(e,t,an),0,sr)}function ro(e,t,r){let n=lr(e,t,(i,s)=>Ei(i,s,r));return Ti(n,i=>i)}function rl(e){return te(K(e,t=>t*t),0,sr)}function no(e){return qe(it(1,rl(e)),e)}var ne=class extends _{constructor(t,r,n,i,s,o,u,l){super(),this.debug=t,this.light_on=r,this.width=n,this.height=i,this.paused=s,this.particles=o,this.time=u,this.timer_id=l}},_t=class extends _{},mt=class extends _{},ht=class extends _{},Qt=class extends _{},Zt=class extends _{constructor(t){super(),this[0]=t}},$t=class extends _{},xt=class extends _{},gt=class extends _{},Ur=class extends _{constructor(t){super(),this[0]=t}},er=class extends _{constructor(t,r,n,i){super(),this.m=t,this.r=r,this.v=n,this.a=i}};function nl(e,t){let r=6674.3;return K(t,n=>{let i=eo(n.r,e.r),s=to(i,i),o=it(r*e.m*n.m,s),u=no(i);return o>10?qe(10,u):qe(o,u)})}function Dr(e,t){let r=e.r,n=zi(t,i=>Tt(ro(r,i.r,.1)));return te(nl(e,n),a([0,0]),Re)}function io(e){return[new ne(!1,!0,Qs(),Zs(),!0,a([]),0,new ee),Oe()]}function il(){return yr(e=>{let t=Xs(10,()=>e(new Qt));return e(new Zt(t))})}function sl(e){return yr(t=>{Ks(e)})}function ol(e,t,r,n,i){let s=pt(e.r);if(!s.isOk())throw pe("let_assert","update",49,"update_particle","Pattern match failed, no pattern matched the value.",{value:s});let o=s[0],u=dt(e.r);if(!u.isOk())throw pe("let_assert","update",50,"update_particle","Pattern match failed, no pattern matched the value.",{value:u});let l=u[0],c=e.r,p=e.v,x=e.a,h=o<=n,$=l<=i;return h&&$?new C(new er(e.m,Re(c,qe(r,p)),Re(p,qe(r,x)),Dr(e,t))):new A("Particle out of window")}function pi(e){return yr(t=>t(new Ur(e)))}function so(e,t){let r=e.paused,n=e.particles,i=e.time;if(t instanceof ht)return[(()=>{let s=e;return new ne(s.debug,Tt(e.light_on),s.width,s.height,s.paused,s.particles,s.time,s.timer_id)})(),Oe()];if(t instanceof mt)return[(()=>{let s=e;return new ne(Tt(e.debug),s.light_on,s.width,s.height,s.paused,s.particles,s.time,s.timer_id)})(),Oe()];if(t instanceof _t){let s=e.timer_id;if(r)return[(()=>{let o=e;return new ne(o.debug,o.light_on,o.width,o.height,!1,o.particles,o.time,o.timer_id)})(),il()];if(!r&&s instanceof Z){let o=s[0];return[(()=>{let u=e;return new ne(u.debug,u.light_on,u.width,u.height,!0,u.particles,u.time,new ee)})(),sl(o)]}else return[(()=>{let o=e;return new ne(o.debug,o.light_on,o.width,o.height,!0,o.particles,o.time,o.timer_id)})(),Oe()]}else if(t instanceof Zt){let s=t[0];return[(()=>{let o=e;return new ne(o.debug,o.light_on,o.width,o.height,o.paused,o.particles,o.time,new Z(s))})(),Oe()]}else{if(t instanceof Qt)return[(()=>{let s=e;return new ne(s.debug,s.light_on,s.width,s.height,s.paused,s.particles,i+.1,s.timer_id)})(),pi(.1)];if(t instanceof $t)return[(()=>{let s=e;return new ne(s.debug,s.light_on,s.width,s.height,s.paused,me(n,a([new er(3+cn(7),a([ze()*e.width,ze()*e.height]),a([ze()*10-5,ze()*10-5]),a([0,0]))])),s.time,s.timer_id)})(),Oe()];if(t instanceof xt)return[(()=>{let s=e;return new ne(s.debug,s.light_on,s.width,s.height,s.paused,s.particles,e.time+1,s.timer_id)})(),pi(1)];if(t instanceof gt)return i===0?[e,Oe()]:[(()=>{let o=e;return new ne(o.debug,o.light_on,o.width,o.height,o.paused,o.particles,i-1,o.timer_id)})(),pi(-1)];{let s=t[0];return[(()=>{let o=e;return new ne(o.debug,o.light_on,o.width,o.height,o.paused,(()=>{let u=K(e.particles,l=>ol(l,e.particles,s,e.width,e.height));return or(qi(u))})(),o.time,o.timer_id)})(),Oe()]}}}var tr="http://www.w3.org/2000/svg";function oo(e){return Ne(tr,"circle",e,O)}function uo(e){return Ne(tr,"line",e,O)}function lo(e,t){return Ne(tr,"defs",e,t)}function Pr(e,t){return Ne(tr,"linearGradient",e,t)}function Ue(e){return Ne(tr,"stop",e,O)}function ll(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function al(e,t){return ns(e,t,O,!1,!1,ll(e),new lt(0))}function di(e){return al("click",pn(e))}function hi(e,t,r,n){return ui(a([di(e)]),a([t?r:n]))}function mi(e,t){return ui(a([di(e)]),a([Ir(t)]))}function _i(e,t){return xe(me(e,a([T("border border-neutral-600/10 rounded-xl bg-neutral-500/10 backdrop-blur-sm shadow-xl shadow-neutral-950/20"),T("flex flex-col m-4 p-3")])),t)}function fl(e){let t=T("size-6"),r=T("invert");return hi(new ht,e,Kt(a([Pt("../src/Assets/theme.png"),t])),Kt(a([Pt("../src/Assets/theme.png"),t,r])))}function pl(e,t){let r=T("size-6"),n;t?n=T(""):n=T("invert");let i=n;return hi(new _t,e,Kt(a([Pt("../src/Assets/pause.png"),r,i])),Kt(a([Pt("../src/Assets/play.png"),r,i])))}function dl(e,t,r){return xe(a([T("relative border-2 rounded-full m-4 size-32"),cr(e,T("border-red-500"),()=>T("border-lime-900")),T("bg-neutral-500/10 backdrop-blur-sm shadow-xl shadow-neutral-950/20")]),a([Fs(a([T("absolute inset-x-0 top-5 text-center")]),a([Xe(je(on(t)))])),xe(a([T("absolute inset-0 flex justify-center items-center")]),a([pl(e,r)])),e?xe(a([T("absolute inset-x-0 bottom-6 gap-4 flex justify-center items-center")]),a([mi(new gt,"-"),mi(new xt,"+")])):xe(a([]),a([]))]))}function _l(){return lo(a([]),a([Pr(a([wr("RED"),y("x1","0%"),y("y1","0%"),y("x2","100%"),y("y2","100%")]),a([Ue(a([y("offset","0%"),y("stop-color","#f36364")])),Ue(a([y("offset","50%"),y("stop-color","#f36364")])),Ue(a([y("offset","100%"),y("stop-color","#f292ed")]))])),Pr(a([wr("BLUE"),y("x1","0%"),y("y1","0%"),y("x2","100%"),y("y2","100%")]),a([Ue(a([y("offset","0%"),y("stop-color","#c6f8ff")])),Ue(a([y("offset","50%"),y("stop-color","#595cff")])),Ue(a([y("offset","100%"),y("stop-color","#595cff")]))])),Pr(a([wr("GREEN"),y("x1","0%"),y("y1","0%"),y("x2","100%"),y("y2","100%")]),a([Ue(a([y("offset","0%"),y("stop-color","#f3f520")])),Ue(a([y("offset","50%"),y("stop-color","#59d102")])),Ue(a([y("offset","100%"),y("stop-color","#59d102")]))]))]))}function ml(e){let t=pt(e.r);if(!t.isOk())throw pe("let_assert","view",255,"view_particle","Pattern match failed, no pattern matched the value.",{value:t});let r=t[0],n=dt(e.r);if(!n.isOk())throw pe("let_assert","view",256,"view_particle","Pattern match failed, no pattern matched the value.",{value:n});let i=n[0],s=je(e.m),o;e.m<5?o="url(#RED)":e.m<8?o="url(#BLUE)":o="url(#GREEN)";let l=o;return oo(a([y("r",s),y("cx",We(r)),y("cy",We(i)),y("fill",l)]))}function hl(e,t){let r=pt(e);if(!r.isOk())throw pe("let_assert","view",275,"view_vector","Pattern match failed, no pattern matched the value.",{value:r});let n=r[0],i=dt(e);if(!i.isOk())throw pe("let_assert","view",276,"view_vector","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0],o=pt(Re(e,qe(50,t)));if(!o.isOk())throw pe("let_assert","view",277,"view_vector","Pattern match failed, no pattern matched the value.",{value:o});let u=o[0],l=dt(Re(e,qe(50,t)));if(!l.isOk())throw pe("let_assert","view",278,"view_vector","Pattern match failed, no pattern matched the value.",{value:l});let c=l[0];return uo(a([y("x1",We(n)),y("y1",We(s)),y("x2",We(u)),y("y2",We(c)),y("stroke","black")]))}function $l(e){return Rs(a([T("relative grow z-10 ")]),(()=>{let t=K(e.particles,ml),r;if(e.debug){let o=K(e.particles,u=>[u.r,Dr(u,e.particles)]);r=K(o,u=>hl(or(u),Ai(u)))}else r=a([]);let s=(o=>me(t,o))(r);return me(s,a([_l()]))})())}function ao(e){let t;e.light_on?t=T("bg-white"):t=T("bg-black");let n=t,i;return e.light_on?i=T("text-black"):i=T("text-white"),xe(a([n,i]),a([xe(a([T("h-screen")]),a([xe(a([T("static flex h-full z-0")]),a([xe(a([T("absolute bottom-0 w-full z-20 flex flex-row items-end")]),a([xe(a([T("flex-grow z-20 flex justify-end")]),a([_i(a([T("w-12")]),a([hi(new mt,e.debug,Ir("i"),Ir("i"))]))])),_i(a([T("w-12")]),a([fl(e.light_on)])),xe(a([T("flex-shrink-0")]),a([dl(e.paused,e.time,e.light_on)])),xe(a([T("flex-grow z-20")]),a([_i(a([T("w-12")]),a([mi(new $t,"+")]))]))])),$l(e)]))]))]))}function co(){let e=Ys(io,so,ao),t=Js(e,"#app",void 0);if(!t.isOk())throw pe("let_assert","sky",12,"main","Pattern match failed, no pattern matched the value.",{value:t})}co();
